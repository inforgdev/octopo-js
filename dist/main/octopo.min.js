function e(e,n,r){return e.generateMatches(n,r,["val","ref"])}function n(e){return{type:"arg",expression:e}}function r(n,r,t){const a={...r,expression:e(n,r.expression,t)};return n.render(a)}function t(...e){return{type:"args",items:e.map((e=>n(e)))}}function a(e,n,t){let a;return a=Array.isArray(n.items)?n.items.map((n=>e.generate(n,t,r))):[e.generate(n.items,t,r)],a.join(t.argSep)}function _(e,n,r){return e.generateMatches(n,r,["call","var","dec","mixin"])}function s(e){return{type:"body",items:e}}function o(e,n,r){let t="";for(let a in n.items){let s=_(e,n.items[a],r),o=r.statementEnd;a!=n.items.length-1||r.needLastStatementEnd||(o=""),r.needBrln&&(o+="\n"),t=t+r.indent+s+o}return t}function i(e,n){return{type:"call",name:e,args:n}}function p(e,n,r){const t={name:n.name,args:e.generate(n.args,r,a)};return e.render(t)}function m(e,n){return{type:"dec",prop:e,value:n}}function E(n,r,t){const a={prop:r.prop,value:e(n,r.value,t)};return n.render(a)}function u(e,n){return{type:"param",name:e,default:n}}const c=(n,r,t)=>{let a=n.tmpl(r.default?"paramDefault":"param");const _={...r,default:r.default&&e(n,r.default,t)};return n.render(_,a)};function l(...e){return{type:"params",items:e.map((e=>{if(Array.isArray(e)){return u(e[0],e[1])}return u(e)}))}}const d=(e,n,r)=>{let t;return t=Array.isArray(n.items)?n.items.map((n=>e.generate(n,r,c))):[e.generate(n.items,r,c)],t.join(r.paramSep)};function A(e,n,r){return{type:"mixin",name:e,params:n,body:r}}function S(e,n,r){const t={...n,params:e.generate(n.params,r,d),body:e.generate(s(n.body),r,o)};return e.render(t)+(r.needBrln?"\n":"")}function f(e){return{type:"ref",name:e}}function N(e,n,r){return e.render(n)}function M(e){return{type:"root",items:e}}function g(e,n,r){let t;return t=Array.isArray(n.items)?n.items.map((n=>_(e,n,r))):[_(e,n.items,r)],t.join("\n")}function y(e){return{type:"val",name:e}}const x=(e,n,r)=>e.render(n);function O(e,n){return{type:"var",name:e,expression:n}}function P(n,r,t){const a={...r,expression:e(n,r.expression,t)};return n.render(a)}var R=Object.freeze({__proto__:null,$arg:r,_arg:n,$args:a,_args:t,$body:o,_body:s,$call:p,_call:i,$dec:E,_dec:m,$mixin:S,_mixin:A,$param:c,_param:u,$params:d,_params:l,$ref:N,_ref:f,$root:g,_root:M,$val:x,_val:y,$var:P,_var:O,generateExpr:e,generateStatement:_});class v extends Error{constructor(e,...n){super(e,n),this.name="OctopoError"}}class $ extends v{constructor(e){super(e.type),this.name="Unexpected node"}}class D extends v{constructor(e){super(e),this.name="Template not found"}}class L extends v{constructor(e){super(e),this.name="Generator not found"}}var U=Object.freeze({__proto__:null,OctopoError:v,UnexpectedNodeError:$,TemplateNotFoundError:D,GeneratorNotFoundError:L});function B(e,n){const r=n[e];if(void 0===r)throw new D(e);return r}function h(e,n){let r=n;return Object.keys(e).forEach((n=>function(n){const t=`_${n.toUpperCase()}_`,a=e[n];r=r.replaceAll(t,a)}(n))),r}function w(e,n){return{tmpl:r=>B(r||e.type,n),render:(r,t)=>h(r,t||B(e.type,n)),generate:I,generateMatches:X}}function I(e,n,r){return(r||b(e.type))(w(e,n),e,n)}function X(e,n,r){if(r.includes(e.type))return I(e,n);throw new $(e)}function b(e){let n=R[`$${e}`];if(void 0===n)throw new L(`$${e}`);return n}var F=Object.freeze({__proto__:null,less:{var:"@_NAME_: _EXPRESSION_",mixin:"._NAME_(_PARAMS_) {\n_BODY_}",dec:"_PROP_: _VALUE_",param:"@_NAME_",paramDefault:"@_NAME_: _DEFAULT_",call:"._NAME_(_ARGS_)",ref:"@_NAME_",val:"_NAME_",arg:"_EXPRESSION_",argSep:", ",paramSep:", ",statementEnd:";",needLastStatementEnd:!0,indent:"  ",needBrln:!0,wordSep:"-",extname:".less"},lessMin:{var:"@_NAME_:_EXPRESSION_",mixin:"._NAME_(_PARAMS_){_BODY_}",dec:"_PROP_:_VALUE_",param:"@_NAME_",paramDefault:"@_NAME_:_DEFAULT_",call:"._NAME_(_ARGS_)",ref:"@_NAME_",val:"_NAME_",arg:"_EXPRESSION_",argSep:",",paramSep:",",statementEnd:";",needLastStatementEnd:!0,indent:"",needBrln:!1,wordSep:"-",extname:".less"},scss:{var:"$_NAME_: _EXPRESSION_",mixin:"@mixin _NAME_(_PARAMS_) {\n_BODY_}",dec:"_PROP_: _VALUE_",param:"$_NAME_",paramDefault:"$_NAME_: _DEFAULT_",call:"@include _NAME_(_ARGS_)",ref:"$_NAME_",val:"_NAME_",arg:"_EXPRESSION_",argSep:", ",paramSep:", ",statementEnd:";",needLastStatementEnd:!0,indent:"  ",needBrln:!0,wordSep:"-",extname:".scss"},scssMin:{var:"$_NAME_:_EXPRESSION_",mixin:"@mixin _NAME_(_PARAMS_){_BODY_}",dec:"_PROP_:_VALUE_",param:"$_NAME_",paramDefault:"$_NAME_:_DEFAULT_",call:"@include _NAME_(_ARGS_)",ref:"$_NAME_",val:"_NAME_",arg:"_EXPRESSION_",argSep:",",paramSep:",",statementEnd:";",needLastStatementEnd:!1,indent:"",needBrln:!1,wordSep:"-",extname:".scss"},styl:{var:"_NAME_ = _EXPRESSION_",mixin:"_NAME_(_PARAMS_) {\n_BODY_}",dec:"_PROP_: _VALUE_",param:"_NAME_",paramDefault:"_NAME_ = _DEFAULT_",call:"._NAME_(_ARGS_)",ref:"_NAME_",val:"_NAME_",arg:"_EXPRESSION_",argSep:", ",paramSep:", ",statementEnd:";",needLastStatementEnd:!0,indent:"  ",needBrln:!0,wordSep:"-",extname:".styl"},stylMin:{var:"_NAME_=_EXPRESSION_",mixin:"_NAME_(_PARAMS_){_BODY_}",dec:"_PROP_:_VALUE_",param:"_NAME_",paramDefault:"_NAME_=_DEFAULT_",call:"._NAME_(_ARGS_)",ref:"_NAME_",val:"_NAME_",arg:"_EXPRESSION_",argSep:",",paramSep:",",statementEnd:";",needLastStatementEnd:!1,indent:"",needBrln:!1,wordSep:"-",extname:".styl"}});export{r as $arg,a as $args,o as $body,p as $call,E as $dec,S as $mixin,c as $param,d as $params,N as $ref,g as $root,x as $val,P as $var,n as _arg,t as _args,s as _body,i as _call,m as _dec,A as _mixin,u as _param,l as _params,f as _ref,M as _root,y as _val,O as _var,U as errors,I as generate,e as generateExpr,X as generateMatches,_ as generateStatement,b as generator,F as langs,w as prod,h as render,B as tmpl};
