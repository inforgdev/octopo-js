function e(e,n,r){return e.generateMatches(n,r,["val","ref"])}function n(e){return{type:"arg",expression:e}}function r(n,r,t){const _={...r,expression:e(n,r.expression,t)};return n.render(_)}function t(...e){return{type:"args",items:e.map((e=>n(e)))}}function _(e,n,t){let _;return _=Array.isArray(n.items)?n.items.map((n=>e.generate(n,t,r))):[e.generate(n.items,t,r)],_.join(t.argSep)}function a(e,n,r){return e.generateMatches(n,r,["call","var","dec","mixin"])}function s(e){return{type:"body",items:e}}function o(e,n,r){let t="";for(let _ in n.items){let s=a(e,n.items[_],r),o=r.statementEnd;_!=n.items.length-1||r.needLastStatementEnd||(o=""),r.needBrln&&(o+="\n"),t=t+r.indent+s+o}return t}function i(e,n){return{type:"call",name:e,args:n}}function p(e,n,r){const t={name:n.name,args:e.generate(n.args,r,_)};return e.render(t)}function E(e,n){return{type:"dec",prop:e,value:n}}function m(n,r,t){const _={prop:r.prop,value:e(n,r.value,t)};return n.render(_)}function u(e,n){return{type:"param",name:e,default:n}}const c=(n,r,t)=>{let _=n.tmpl(r.default?"paramDefault":"param");const a={...r,default:r.default&&e(n,r.default,t)};return n.render(a,_)};function l(...e){return{type:"params",items:e.map((e=>{if(Array.isArray(e)){return u(e[0],e[1])}return u(e)}))}}const d=(e,n,r)=>{let t;return t=Array.isArray(n.items)?n.items.map((n=>e.generate(n,r,c))):[e.generate(n.items,r,c)],t.join(r.paramSep)};function A(e,n,r){return{type:"mixin",name:e,params:n,body:r}}function S(e,n,r){const t={...n,params:e.generate(n.params,r,d),body:e.generate(s(n.body),r,o)};return e.render(t)+(r.needBrln?"\n":"")}function f(e){return{type:"ref",name:e}}function N(e,n,r){return e.render(n)}function M(e){return{type:"root",items:e}}function g(e,n,r){let t;return t=Array.isArray(n.items)?n.items.map((n=>a(e,n,r))):[a(e,n.items,r)],t.join("\n")}function x(e){return{type:"val",name:e}}const y=(e,n,r)=>e.render(n);function O(e,n){return{type:"var",name:e,expression:n}}function P(n,r,t){const _={...r,expression:e(n,r.expression,t)};return n.render(_)}var R=Object.freeze({__proto__:null,$arg:r,_arg:n,$args:_,_args:t,$body:o,_body:s,$call:p,_call:i,$dec:m,_dec:E,$mixin:S,_mixin:A,$param:c,_param:u,$params:d,_params:l,$ref:N,_ref:f,$root:g,_root:M,$val:y,_val:x,$var:P,_var:O,generateExpr:e,generateStatement:a});class v extends Error{constructor(e,...n){super(e,n),this.name="OctopoError"}}class $ extends v{constructor(e){super(e.type),this.name="Unexpected node"}}class L extends v{constructor(e){super(e),this.name="Template not found"}}class U extends v{constructor(e){super(e),this.name="Generator not found"}}var D=Object.freeze({__proto__:null,OctopoError:v,UnexpectedNodeError:$,TemplateNotFoundError:L,GeneratorNotFoundError:U});function B(e,n){const r=n[e];if(void 0===r)throw new L(e);return r}function h(e,n){let r=n;return Object.keys(e).forEach((n=>function(n){const t=`_${n.toUpperCase()}_`,_=e[n];r=r.replaceAll(t,_)}(n))),r}function w(e,n){return{tmpl:r=>B(r||e.type,n),render:(r,t)=>h(r,t||B(e.type,n)),generate:I,generateMatches:X}}function I(e,n,r){return(r||V(e.type))(w(e,n),e,n)}function X(e,n,r){if(r.includes(e.type))return I(e,n);throw new $(e)}function V(e){let n=R[`$${e}`];if(void 0===n)throw new U(`$${e}`);return n}var b=Object.freeze({__proto__:null,less:{var:"@_NAME_: _EXPRESSION_",mixin:"._NAME_(_PARAMS_) {\n_BODY_}",dec:"_PROP_: _VALUE_",param:"@_NAME_",paramDefault:"@_NAME_: _DEFAULT_",expression:"_VALUE_",call:"._NAME_(_ARGS_)",ref:"@_NAME_",val:"_NAME_",arg:"_EXPRESSION_",argSep:", ",paramSep:", ",statementEnd:";",needLastStatementEnd:!0,indent:"  ",needBrln:!0,wordSep:"-",extname:".less"},lessMin:{var:"@_NAME_:_EXPRESSION_",mixin:"._NAME_(_PARAMS_){_BODY_}",dec:"_PROP_:_VALUE_",param:"@_NAME_",paramDefault:"@_NAME_:_DEFAULT_",expression:"_VALUE_",call:"._NAME_(_ARGS_)",ref:"@_NAME_",val:"_NAME_",arg:"_EXPRESSION_",argSep:",",paramSep:",",statementEnd:";",needLastStatementEnd:!0,indent:"",needBrln:!1,wordSep:"-",extname:".less"},scss:{var:"$_NAME_: _EXPRESSION_",mixin:"@mixin _NAME_(_PARAMS_) {\n_BODY_}",dec:"_PROP_: _VALUE_",param:"$_NAME_",paramDefault:"$_NAME_: _DEFAULT_",call:"@include _NAME_(_ARGS_)",ref:"$_NAME_",val:"_NAME_",arg:"_EXPRESSION_",argSep:", ",paramSep:", ",statementEnd:";",needLastStatementEnd:!0,indent:"  ",needBrln:!0,wordSep:"-",extname:".scss"},scssMin:{var:"$_NAME_:_EXPRESSION_",mixin:"@mixin _NAME_(_PARAMS_){_BODY_}",dec:"_PROP_:_VALUE_",param:"$_NAME_",paramDefault:"$_NAME_:_DEFAULT_",expression:"_VALUE_",call:"@include _NAME_(_ARGS_)",ref:"$_NAME_",val:"_NAME_",arg:"_EXPRESSION_",argSep:",",paramSep:",",statementEnd:";",needLastStatementEnd:!1,indent:"",needBrln:!1,wordSep:"-",extname:".scss"},styl:{var:"_NAME_ = _EXPRESSION_",mixin:"_NAME_(_PARAMS_) {\n_BODY_}",dec:"_PROP_: _VALUE_",param:"_NAME_",paramDefault:"_NAME_ = _DEFAULT_",expression:"_VALUE_",call:"._NAME_(_ARGS_)",ref:"_NAME_",val:"_NAME_",arg:"_EXPRESSION_",argSep:", ",paramSep:", ",statementEnd:";",needLastStatementEnd:!0,indent:"  ",needBrln:!0,wordSep:"-",extname:".styl"},stylMin:{var:"_NAME_=_EXPRESSION_",mixin:"_NAME_(_PARAMS_){_BODY_}",dec:"_PROP_:_VALUE_",param:"_NAME_",paramDefault:"_NAME_=_DEFAULT_",expression:"_VALUE_",call:"._NAME_(_ARGS_)",ref:"_NAME_",val:"_NAME_",arg:"_EXPRESSION_",argSep:",",paramSep:",",statementEnd:";",needLastStatementEnd:!1,indent:"",needBrln:!1,wordSep:"-",extname:".styl"}});export{r as $arg,_ as $args,o as $body,p as $call,m as $dec,S as $mixin,c as $param,d as $params,N as $ref,g as $root,y as $val,P as $var,n as _arg,t as _args,s as _body,i as _call,E as _dec,A as _mixin,u as _param,l as _params,f as _ref,M as _root,x as _val,O as _var,D as errors,I as generate,e as generateExpr,X as generateMatches,a as generateStatement,V as generator,b as langs,w as prod,h as render,B as tmpl};
